if(!customElements.get("pickup-availability")){class PickupAvailability extends HTMLElement{constructor(){super(),this.hasAttribute("available")&&(this.errorHtml=this.querySelector("template").content.firstElementChild.cloneNode(!0),this.onClickRefreshList=this.onClickRefreshList.bind(this),this.fetchAvailability(this.dataset.variantId))}fetchAvailability(variantId){let rootUrl=this.dataset.baseUrl;rootUrl.endsWith("/")||(rootUrl=rootUrl+"/");const variantSectionUrl=`${rootUrl}variants/${variantId}/?section_id=pickup-availability`;fetch(variantSectionUrl).then(response=>response.text()).then(text=>{const sectionInnerHTML=new DOMParser().parseFromString(text,"text/html").querySelector(".shopify-section");this.renderPreview(sectionInnerHTML)}).catch(e=>{const button=this.querySelector("button");button&&button.removeEventListener("click",this.onClickRefreshList),this.renderError()})}onClickRefreshList(evt){this.fetchAvailability(this.dataset.variantId)}renderError(){this.innerHTML="",this.appendChild(this.errorHtml),this.querySelector("button").addEventListener("click",this.onClickRefreshList)}renderPreview(sectionInnerHTML){const drawer=document.querySelector("#Drawer-Pickup-Availability");if(drawer&&drawer.remove(),!sectionInnerHTML.querySelector("pickup-availability-preview")){this.innerHTML="",this.removeAttribute("available");return}this.innerHTML=sectionInnerHTML.querySelector("pickup-availability-preview").outerHTML,this.setAttribute("available",""),document.body.appendChild(sectionInnerHTML.querySelector("#Drawer-Pickup-Availability"));const button=this.querySelector("button");button&&button.addEventListener("click",e=>{document.querySelector("#Drawer-Pickup-Availability").openDrawer()})}}customElements.define("pickup-availability",PickupAvailability)}if(!customElements.get("pickup-availability-drawer")){class PickupAvailabilityDrawer extends HTMLElement{constructor(){super(),this.drawerWapper=this.querySelector(".m-drawer__wrapper"),this.drawerContent=this.querySelector(".m-drawer__content"),this.drawerClose=this.querySelector(".m-drawer__close"),this.drawerClose.addEventListener("click",e=>{e.preventDefault(),this.closeDrawer()}),document.body.addEventListener("click",e=>{e.target.classList.contains("m-drawer__wrapper")&&this.closeDrawer()})}openDrawer(){window.innerWidth<770&&this.drawerWapper.classList.add("mobile"),this.drawerWapper.classList.remove("m:hidden"),requestAnimationFrame(()=>{this.drawerWapper.style.setProperty("--m-bg-opacity","0.5"),this.drawerContent.style.setProperty("--m-translate-x","0")})}closeDrawer(){this.drawerWapper.style.setProperty("--m-bg-opacity","0"),this.drawerContent.style.setProperty("--m-translate-x","100%"),setTimeout(()=>{this.drawerWapper.classList.add("m:hidden"),this.drawerWapper.classList.remove("mobile")},300)}}customElements.define("pickup-availability-drawer",PickupAvailabilityDrawer)}
//# sourceMappingURL=/cdn/shop/t/5/assets/pickup-availability.js.map?v=43602611482918927651728918271
